{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/dmitr/OneDrive/\\u05DE\\u05E1\\u05DE\\u05DB\\u05D9\\u05DD/personal projects/Marketplace/FullStackMarketplace/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/dmitr/OneDrive/\\u05DE\\u05E1\\u05DE\\u05DB\\u05D9\\u05DD/personal projects/Marketplace/FullStackMarketplace/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/dmitr/OneDrive/\\u05DE\\u05E1\\u05DE\\u05DB\\u05D9\\u05DD/personal projects/Marketplace/FullStackMarketplace/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useProductContext}from\"../hooks/useProductsContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductForm=function ProductForm(){var _useProductContext=useProductContext(),dispatch=_useProductContext.dispatch;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),id=_useState2[0],setId=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),price=_useState6[0],setPrice=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),quantity=_useState8[0],setQuantity=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),description=_useState10[0],setDescription=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),error=_useState12[0],setError=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),success=_useState14[0],setSuccess=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),errorFields=_useState16[0],setErrorFields=_useState16[1];var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(x){var product,response,answer;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setSuccess(null);x.preventDefault();product={id:id,name:name,price:price,quantity:quantity,description:description};_context.next=5;return fetch('/api/products',{method:'POST',body:JSON.stringify(product),//the \"JSON.stringify()\" gonna convert the product from object to json.\nheaders:{'Content-type':'application/json'}});case 5:response=_context.sent;_context.next=8;return response.json();case 8:answer=_context.sent;if(!response.ok){setError(\"\".concat(answer.error,\"\\n\"));if(answer.errorFields){setErrorFields(answer.errorFields);};}if(response.ok){setError(null);setId('');setName('');setPrice(undefined);setQuantity(undefined);setDescription('');setErrorFields([]);dispatch({type:'add_product',payload:answer});setSuccess(\"New product by the name \".concat(name,\" was created.\"));}case 11:case\"end\":return _context.stop();}}},_callee);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{className:\"create\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add new product\"}),/*#__PURE__*/_jsx(\"label\",{children:\"ID: \"}),/*#__PURE__*/_jsx(\"input\",{className:errorFields.includes('Id')?'error':'',type:\"text\",onChange:function onChange(x){setId(x.target.value);},value:id}),/*#__PURE__*/_jsx(\"label\",{children:\"Name: \"}),/*#__PURE__*/_jsx(\"input\",{className:errorFields.includes('Name')?'error':'',type:\"text\",onChange:function onChange(x){setName(x.target.value);},value:name}),/*#__PURE__*/_jsx(\"label\",{children:\"Price: \"}),/*#__PURE__*/_jsx(\"input\",{className:errorFields.includes('Price')?'error':'',type:\"number\",onChange:function onChange(x){setPrice(x.target.value);},value:price}),/*#__PURE__*/_jsx(\"label\",{children:\"Quantity: \"}),/*#__PURE__*/_jsx(\"input\",{className:errorFields.includes('Quantity')?'error':'',type:\"number\",onChange:function onChange(x){setQuantity(x.target.value);},value:quantity}),/*#__PURE__*/_jsx(\"label\",{children:\"Description: \"}),/*#__PURE__*/_jsx(\"input\",{className:errorFields.includes('Description')?'error':'',type:\"text\",onChange:function onChange(x){setDescription(x.target.value);},value:description,minLength:1,maxLength:30}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",children:\"Create Product\"}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"seccess\",children:success}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error})]});};export default ProductForm;","map":{"version":3,"names":["useState","useProductContext","ProductForm","dispatch","id","setId","name","setName","price","setPrice","quantity","setQuantity","description","setDescription","error","setError","success","setSuccess","errorFields","setErrorFields","submitHandler","x","preventDefault","product","fetch","method","body","JSON","stringify","headers","response","json","answer","ok","undefined","type","payload","includes","target","value"],"sources":["C:/Users/dmitr/OneDrive/מסמכים/personal projects/Marketplace/FullStackMarketplace/frontend/src/components/ProductForm.js"],"sourcesContent":["import { useState } from \"react\"\r\nimport { useProductContext } from \"../hooks/useProductsContext\";\r\n\r\nconst ProductForm = () => {\r\n    const { dispatch } = useProductContext();\r\n\r\n    const [id, setId] = useState('');\r\n    const [name, setName] = useState('');\r\n    const [price, setPrice] = useState(0);\r\n    const [quantity, setQuantity] = useState(0);\r\n    const [description, setDescription] = useState('');\r\n    const [error, setError] = useState(null);\r\n    const [success, setSuccess] = useState(null);\r\n    const [errorFields, setErrorFields] = useState([]);\r\n\r\n    const submitHandler = async (x) => {\r\n        setSuccess(null);\r\n        x.preventDefault();\r\n        const product = { id, name, price, quantity, description };\r\n        const response = await fetch('/api/products', {\r\n            method: 'POST',\r\n            body: JSON.stringify(product),//the \"JSON.stringify()\" gonna convert the product from object to json.\r\n            headers: {\r\n                'Content-type': 'application/json'\r\n            }\r\n        })\r\n        const answer = await response.json();\r\n        if (!response.ok) {\r\n            setError(`${answer.error}\\n`);\r\n            if (answer.errorFields) { setErrorFields(answer.errorFields) };\r\n        }\r\n        if (response.ok) {\r\n            setError(null);\r\n            setId('');\r\n            setName('');\r\n            setPrice(undefined);\r\n            setQuantity(undefined)\r\n            setDescription('');\r\n            setErrorFields([]);\r\n            dispatch({ type: 'add_product', payload: answer })\r\n            setSuccess(`New product by the name ${name} was created.`)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <form className=\"create\" onSubmit={submitHandler}>\r\n            <h3>Add new product</h3>\r\n\r\n            <label>ID: </label>\r\n            <input className={errorFields.includes('Id') ? 'error' : ''} type=\"text\" onChange={(x) => { setId(x.target.value) }} value={id} />\r\n\r\n            <label>Name: </label>\r\n            <input className={errorFields.includes('Name') ? 'error' : ''} type=\"text\" onChange={(x) => { setName(x.target.value) }} value={name} />\r\n\r\n            <label>Price: </label>\r\n            <input className={errorFields.includes('Price') ? 'error' : ''} type=\"number\" onChange={(x) => { setPrice(x.target.value) }} value={price} />\r\n\r\n            <label>Quantity: </label>\r\n            <input className={errorFields.includes('Quantity') ? 'error' : ''} type=\"number\" onChange={(x) => { setQuantity(x.target.value) }} value={quantity} />\r\n\r\n            <label>Description: </label>\r\n            <input \r\n            className={errorFields.includes('Description') ? 'error' : ''} \r\n            type=\"text\" \r\n            onChange={(x) => { setDescription(x.target.value) }} \r\n            value={description}\r\n            minLength={1} \r\n            maxLength={30}\r\n            />\r\n\r\n            <button className=\"button\">Create Product</button>\r\n            {success && <div className=\"seccess\">{success}</div>}\r\n            {error && <div className=\"error\">{error}</div>}\r\n        </form>\r\n    );\r\n}\r\nexport default ProductForm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}